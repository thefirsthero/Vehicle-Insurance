{"version":3,"sources":["store/logInfo.js","store/index.js","pages/Registration.js","pages/FrontPage.js","pages/Login.js","pages/Profile.js","App.js","index.js"],"names":["State","React","createContext","Dispatch","reducer","state","action","type","console","log","userInfo","isLoggedIn","LogInfo","Provider","children","useReducer","dispatch","value","providers","Store","initial","reduce","parent","cloneElement","Registration","useState","name","login","email","password","birthdate","country","registerData","setRegisterData","countriesList","setCountriesList","date","activeErr","setActiveErr","isAgreed","setAgreed","logInfoDispatch","useContext","passInputRef","useRef","history","useHistory","dateRegex","useEffect","axios","get","then","response","data","countries","undefined","map","id","nicename","className","onSubmit","e","preventDefault","match","method","url","timestamp","Math","floor","Date","now","code","logInInfo","push","current","message","onChange","target","placeholder","ref","checked","disabled","FrontPage","to","Login","emailOrLogin","setUserInfo","passRef","Profile","logState","logDispatch","onClick","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cf9475b1.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n// Context\r\nconst State = React.createContext();\r\nconst Dispatch = React.createContext();\r\n\r\n// Reducer\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"SET_CURR_USER\":\r\n      console.log(\"STATE: \", state, \"ACTION: \", action);\r\n      return {\r\n        userInfo: { ...action.userInfo },\r\n        isLoggedIn: action.isLoggedIn,\r\n      };\r\n\r\n    case \"LOG_OUT\":\r\n      return {\r\n        userInfo: {},\r\n        isLoggedIn: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// Provider\r\nconst Provider = ({ children }) => {\r\n  const [state, dispatch] = React.useReducer(reducer, {\r\n    userInfo: {},\r\n    isLoggedIn: false,\r\n  });\r\n\r\n  return (\r\n    <State.Provider value={state}>\r\n      <Dispatch.Provider value={dispatch}>{children}</Dispatch.Provider>\r\n    </State.Provider>\r\n  );\r\n};\r\n\r\n// Export\r\nexport const LogInfo = {\r\n  State,\r\n  Dispatch,\r\n  Provider,\r\n};\r\n","import React from \"react\";\r\nimport { LogInfo } from \"./logInfo\";\r\n\r\nconst providers = [<LogInfo.Provider />];\r\n\r\nconst Store = ({ children: initial }) =>\r\n  providers.reduce(\r\n    (children, parent) => React.cloneElement(parent, { children }),\r\n    initial\r\n  );\r\n\r\nexport { Store, LogInfo };\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\n\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { LogInfo } from \"../store/index\";\r\n\r\nimport \"../App.css\";\r\n\r\nconst Registration = () => {\r\n  const [registerData, setRegisterData] = useState({\r\n    name: \"\",\r\n    login: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    birthdate: \"\",\r\n    country: \"Afghanistan\",\r\n  });\r\n  const [countriesList, setCountriesList] = useState([]);\r\n  const [activeErr, setActiveErr] = useState({\r\n    email: \"\",\r\n    login: \"\",\r\n    date: \"\",\r\n  });\r\n  const [isAgreed, setAgreed] = useState(true);\r\n\r\n  const logInfoDispatch = useContext(LogInfo.Dispatch);\r\n  const passInputRef = useRef(null);\r\n  let history = useHistory();\r\n  const dateRegex = /([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/;\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"https://register-auth-app.herokuapp.com/api/countries\")\r\n      .then((response) => setCountriesList([...response.data]));\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (registerData.birthdate.match(dateRegex)) {\r\n      setActiveErr({ ...activeErr, date: \"\" });\r\n      axios({\r\n        method: \"post\",\r\n        url: \"https://register-auth-app.herokuapp.com/api/register\",\r\n        data: {\r\n          ...registerData,\r\n          timestamp: Math.floor(Date.now() / 1000),\r\n        },\r\n      }).then((response) => {\r\n        if (response.data.code === 200) {\r\n          logInfoDispatch({\r\n            type: \"SET_CURR_USER\",\r\n            userInfo: { ...response.data.logInInfo },\r\n            isLoggedIn: true,\r\n          });\r\n          history.push(\"/profile\");\r\n        } else if (response.data.code === 405) {\r\n          console.log(response.data);\r\n          passInputRef.current.value = \"\";\r\n          setActiveErr({\r\n            ...activeErr,\r\n            email: response.data.message[0].email ? \"active\" : \"\",\r\n            login: response.data.message[0].login ? \"active\" : \"\",\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      setActiveErr({ ...activeErr, date: \"active\" });\r\n    }\r\n  };\r\n\r\n  let countries;\r\n  if (countriesList !== undefined) {\r\n    countries = countriesList.map((country, id) => (\r\n      <option key={id}>{country.nicename}</option>\r\n    ));\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Register</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label className=\"input-label\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, name: e.target.value })\r\n          }\r\n        />\r\n\r\n        <label className=\"input-label\">Login</label>\r\n        <input\r\n          type=\"text\"\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, login: e.target.value })\r\n          }\r\n        />\r\n\r\n        <p className={\"login-err\" + \" \" + activeErr.login}>\r\n          This login has already taken.\r\n        </p>\r\n        <label className=\"input-label\">E-mail</label>\r\n        <input\r\n          type=\"email\"\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, email: e.target.value })\r\n          }\r\n        />\r\n\r\n        <p className={\"login-err\" + \" \" + activeErr.email}>\r\n          This email has already taken\r\n        </p>\r\n        <label className=\"input-label\">Date of Birth</label>\r\n        <input\r\n          placeholder=\"yyyy-mm-dd\"\r\n          type=\"text\"\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, birthdate: e.target.value })\r\n          }\r\n        />\r\n\r\n        <p className={\"login-err\" + \" \" + activeErr.date}>Invalid date</p>\r\n        <label className=\"input-label\">Password</label>\r\n        <input\r\n          type=\"password\"\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, password: e.target.value })\r\n          }\r\n          ref={passInputRef}\r\n        />\r\n        <label className=\"input-label\">Country</label>\r\n        <select\r\n          onChange={(e) =>\r\n            setRegisterData({ ...registerData, country: e.target.value })\r\n          }\r\n        >\r\n          {countries}\r\n        </select>\r\n        <label className=\"checkbox-label\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"terms\"\r\n            onChange={(e) => setAgreed(!e.target.checked)}\r\n          />\r\n          agree with terms and conditions\r\n        </label>\r\n        <input type=\"submit\" value=\"Submit\" disabled={isAgreed} />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Registration;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"../App.css\";\r\n\r\nconst FrontPage = () => {\r\n  return (\r\n    <div className=\"front-page\">\r\n      <Link to=\"/register\">\r\n        <h1>Register</h1>\r\n      </Link>\r\n      <Link to=\"/login\">\r\n        <h1>Log In</h1>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\nexport default FrontPage;\r\n","import React, { useState, useContext, useRef } from \"react\";\r\n\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { LogInfo } from \"../store/index\";\r\nimport \"../App.css\";\r\n\r\nconst Login = () => {\r\n  const [userInfo, setUserInfo] = useState({\r\n    emailOrLogin: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [activeErr, setActiveErr] = useState(\"\");\r\n  const logInfoDispatch = useContext(LogInfo.Dispatch);\r\n  const passRef = useRef(null);\r\n  let history = useHistory();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    axios({\r\n      method: \"post\",\r\n      url: \"https://register-auth-app.herokuapp.com/api/login\",\r\n      data: {\r\n        ...userInfo,\r\n      },\r\n    }).then((response) => {\r\n      if (response.data.code === 200) {\r\n        logInfoDispatch({\r\n          type: \"SET_CURR_USER\",\r\n          userInfo: {\r\n            email: response.data.userInfo[0].email,\r\n            name: response.data.userInfo[0].name,\r\n          },\r\n          isLoggedIn: true,\r\n        });\r\n        history.push(\"/profile\");\r\n      } else {\r\n        setActiveErr(\"active\");\r\n        passRef.current.value = \"\";\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Log In</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          placeholder=\"Email / Login\"\r\n          type=\"text\"\r\n          onChange={(e) =>\r\n            setUserInfo({ ...userInfo, emailOrLogin: e.target.value })\r\n          }\r\n        />\r\n        <input\r\n          ref={passRef}\r\n          placeholder=\"Password\"\r\n          type=\"password\"\r\n          onChange={(e) =>\r\n            setUserInfo({ ...userInfo, password: e.target.value })\r\n          }\r\n        />\r\n        <p className={\"login-err\" + \" \" + activeErr}>Enter correct data</p>\r\n        <input type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useContext } from \"react\";\r\n\r\nimport { LogInfo } from \"../store/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../App.css\";\r\n\r\nconst Profile = () => {\r\n  const logState = useContext(LogInfo.State);\r\n  const logDispatch = useContext(LogInfo.Dispatch);\r\n  let history = useHistory();\r\n\r\n  const onLogout = () => {\r\n    logDispatch({ type: \"LOG_OUT\" });\r\n    history.push(\"/\");\r\n  };\r\n  return (\r\n    <div className=\"profile\">\r\n      <h1>{\"E-mail: \" + logState.userInfo.email}</h1>\r\n      <h1>{\"Name: \" + logState.userInfo.name}</h1>\r\n      <button className=\"logout-btn\" onClick={onLogout}>\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useContext } from \"react\";\n\nimport { BrowserRouter, Route, Redirect } from \"react-router-dom\";\n\nimport { LogInfo } from \"./store/index\";\n\nimport \"./App.css\";\n\nimport Registration from \"./pages/Registration\";\nimport FrontPage from \"./pages/FrontPage\";\nimport Login from \"./pages/Login\";\nimport Profile from \"./pages/Profile\";\n\nfunction App() {\n  const logState = useContext(LogInfo.State);\n  return (\n    <>\n      <BrowserRouter>\n        <Route exact path=\"/\" component={FrontPage}>\n          {logState.isLoggedIn ? <Redirect to=\"/profile\" /> : <FrontPage />}\n        </Route>\n        <Route path=\"/register\" component={Registration} />\n        <Route path=\"/login/\" component={Login} />\n        <Route path=\"/profile\" component={Profile} />\n      </BrowserRouter>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Store } from \"./store/index\";\nReactDOM.render(\n  <React.StrictMode>\n    <Store>\n      <App />\n    </Store>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}